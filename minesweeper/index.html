<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Minesweeper</title>
  <link rel="shortcut icon" href="data:image/x-icon;" type="image/x-icon">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.2/css/all.css">
  <link rel="stylesheet" href="./minesweeper.css">
</head>

<body class="dark">
  <div class="container">
    <div class="title">
      <div class="icon">
        <input type="checkbox" id="toggle">
        <label for="toggle"></label>
        <i class="fa-solid fa-lightbulb"></i>
      </div>
      <h2>mineswepper</h2>
      <div id="emoji"></div>
    </div>
    <p id="indice">Long press to flag the mines</p>
    <table>
      <tbody id="minesweeper">
        <!-- Dear Student, would you write a bunch of HTML here or generate
        a big array of tiles, or do it via JavaScript? -->
        <!-- yes, should do it via JavaScript -->
      </tbody>
    </table>
    <div id="result">
      <span>Last Run</span>
      <span>:</span>
      <span id="time">00:17,890</span>
      <span>Best Run</span>
      <span>:</span>
      <span id="best">00:08,964</span>
      <span>Victory</span>
      <span>:</span>
      <span id="win"></span>
    </div>
  </div>
  </div>

  <!-- Including your code -->
  <script type="module" src="./lib/minesweeper.js"></script>
  <script type="module" src="./lib/lightToggle.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
  <script>
    const emojis = [
      ['🌈', '⚡️', '💥', '✨', '💫', '🌸'],
      ['🌈', '🦄', '🍆', '💦', '🍑'],
      ['💖', '🤩', '🥰', '🥳', '🍉'],
      ['🐶', '🐱', '🦞', '🐞', '🍀']
    ]
    const emojiElement = document.getElementById("emoji");
    const checkEmoji = (mutationList, observer) => {
      const desiredEmoji = "😎";
      if (emojiElement.innerText === desiredEmoji) {
        const jsConfetti = new JSConfetti();
        jsConfetti.addConfetti({
          emojis: emojis[Math.floor(Math.random() * 4)],
          emojiSize: 48,
          confettiNumber: 120,
        });
      }
    };
    const config = { characterData: true, characterDataOldValue: true, subtree: true, childList: true };
    const observer = new MutationObserver(checkEmoji);
    observer.observe(emojiElement, config);
  </script>
</body>

</html>
